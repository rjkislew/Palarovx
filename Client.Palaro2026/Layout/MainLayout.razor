@inherits LayoutComponentBase
@inject IJSRuntime JSRuntime

@* Required *@
<MudThemeProvider Theme="PGASTheme" DefaultScrollbar="true" />
<MudPopoverProvider />

@* Needed for dialogs *@
<MudDialogProvider />

@* Needed for snackbars *@
<MudSnackbarProvider />

<MudLayout Class="px-3">
    <MudAppBar Elevation="0" Dense Class="px-3" Gutters="false">
        <MudIconButton Class="pa-1" Icon="@Icons.Material.Filled.Menu" Color="Color.Tertiary" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())" />
        <MudSpacer />
        <MudButton Variant="Variant.Outlined" Color="Color.Primary"><MudText Typo="Typo.body2" Color="Color.Tertiary">Sign-in</MudText></MudButton>
    </MudAppBar>
    <MudDrawer @bind-Open="_drawerOpen" Elevation="0">
        <NavigationMenu />
        <AdminNavigationMenu />
    </MudDrawer>
    <MudMainContent>
        @Body
    </MudMainContent>
</MudLayout>

@code {
    bool _drawerOpen = true;

    void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
        // Trigger the resize of the map whenever the drawer is toggled
        _ = JSRuntime.InvokeVoidAsync("resizeMap");
    }

    private MudTheme PGASTheme = new MudTheme()
        {
            Typography = new Typography()
            {
                Default = new Default()
                {
                    FontFamily = new[] { "Poppins" },
                },
                H1 = new H1()
                {
                    FontFamily = new[] { "Bebas" },
                    FontSize = "110px",
                    LetterSpacing = "1px",
                    LineHeight = 1
                },
                H2 = new H2()
                {
                    FontFamily = new[] { "Bebas" },
                    LetterSpacing = "2px"
                },
                H3 = new H3()
                {
                    FontFamily = new[] { "Bebas" },
                    FontSize = "25px",
                    LetterSpacing = "2px"
                }
            },
            PaletteLight = new PaletteLight()
            {
                Primary = Colors.Blue.Accent3,
                Secondary = Colors.Orange.Accent4,
                Tertiary = Colors.Gray.Darken4,
                AppbarBackground = Colors.Shades.White,
                DrawerBackground = Colors.Shades.White,
            },
            LayoutProperties = new LayoutProperties()
            {
                DrawerWidthLeft = "350px",
            }
        };
}
