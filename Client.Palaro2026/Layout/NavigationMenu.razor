@using System.Net.Http
@using System.Text.Json
@using System.Threading.Tasks
@using Client.Palaro2026.Services

@inject IDialogService dialogService
@inject APIService apiService
@inject HttpClient httpClient
@inject NavigationManager navigationManager
@inject FeaturesUnlockingService featuresUnlockingService

<!-- Navigation Menu -->
<MudNavMenu Rounded >

    <!-- flexes to row view on smaller screens -->
    <MudStack Class="flex-md-row">
        <MudNavLink Ripple="false" Href="./" Match="NavLinkMatch.All">Home</MudNavLink>
        <MudNavLink Ripple="false" Href="./news" Match="NavLinkMatch.Prefix">News</MudNavLink>

        <!-- Checks if features are unlocked: show events if true else hide events -->

        <MudNavLink Ripple="false" Href="./events" Match="NavLinkMatch.Prefix">Events</MudNavLink>
        <MudNavLink Ripple="false" Href="./venues" Match="NavLinkMatch.Prefix">Venues</MudNavLink>
        <MudNavLink Ripple="false" Href="./sports" Match="NavLinkMatch.Prefix">Sports</MudNavLink>
        <MudNavLink Ripple="false" Href="./regional-teams" Match="NavLinkMatch.Prefix">Regional Teams</MudNavLink>
    </MudStack>
</MudNavMenu>

@code
{
    protected override async Task OnInitializedAsync()
    {
        // check if the user has access to features
        featuresUnlockingService.OnLockChanged += StateHasChanged;

        // Load the features unlocking state from local storage
        await featuresUnlockingService.LoadFromLocalStorageAsync();
    }
}


