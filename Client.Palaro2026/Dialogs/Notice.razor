@using System.Net.Http
@using System.Text.Json
@using System.Threading.Tasks
@using System.Text
@inject ISnackbar Snackbar
@inject IJSRuntime JSRuntime
@inject IDialogService DialogService
@inject APIService apiService
@inject HttpClient httpClient

<MudDialog>
    <DialogContent>
        <MudStack Spacing="10">
            <MudStack Spacing="1" Class="mb-5">
                <MudText Typo="Typo.h5" Align="Align.Center">NOTICE TO ALL PARTICIPANTS AND VISITORS</MudText>
                <MudText Typo="Typo.h6" Align="Align.Center">Palarong Pambansa 2026 – Plastic-Free Policy</MudText>

                <MudText Typo="Typo.caption" Align="Align.Center">
                    In line with our commitment to environmental sustainability and responsible hosting, the <strong>Province of Agusan del Sur</strong>,
                    the official host of <strong>Palarong Pambansa 2026</strong>, proudly upholds its designation as a <strong>Plastic-Free Area</strong>.
                </MudText>
            </MudStack>

            <MudStack Spacing="1">
                <MudText Typo="Typo.h6">Plastic-Free Guidelines 🌱</MudText>
                <MudStack Spacing="5">
                    <MudStack Spacing="1">
                        <MudText>
                            <strong>Prohibited Items</strong><br />
                        </MudText>
                        <MudText Typo="Typo.caption">
                            The use and distribution of the following single-use plastic items are <strong>strictly prohibited</strong> in all Palaro venues,
                            billeting quarters, and official events:
                        </MudText>
                        <MudStack Spacing="1">
                            <MudText Typo="Typo.caption">• Plastic bags</MudText>
                            <MudText Typo="Typo.caption">• Plastic straws</MudText>
                            <MudText Typo="Typo.caption">• Plastic cutlery and cups</MudText>
                            <MudText Typo="Typo.caption">• Plastic food containers and wrappers</MudText>
                        </MudStack>
                    </MudStack>

                    <MudStack Spacing="1">
                        <MudText>
                            <strong>Encouraged Alternatives</strong><br />
                        </MudText>
                        <MudText Typo="Typo.caption">
                            All athletes, coaches, visitors, and vendors are encouraged to use <strong>eco-friendly and reusable items</strong>, including but not limited to:
                        </MudText>
                        <MudStack Spacing="1">
                            <MudText Typo="Typo.caption">• Refillable water bottles/tumblers</MudText>
                            <MudText Typo="Typo.caption">• Cloth or eco-bags</MudText>
                            <MudText Typo="Typo.caption">• Biodegradable food packaging</MudText>
                            <MudText Typo="Typo.caption">• Reusable utensils and containers</MudText>
                        </MudStack>
                    </MudStack>


                    <MudStack Spacing="1">
                        <MudText>
                            <strong>Waste Management Compliance</strong><br />
                        </MudText>
                        <MudText Typo="Typo.caption">
                            Proper waste segregation and disposal practices must be followed. Dedicated eco-stations and recycling bins will be available at all major event areas.
                        </MudText>
                    </MudStack>

                    <MudStack Spacing="1">
                        <MudText>
                            <strong>Community Support</strong><br />
                        </MudText>
                        <MudText Typo="Typo.caption">
                            This policy aligns with Agusan del Sur’s ongoing environmental programs such as the <em>Ecobricks-for-Rice initiative</em> and <em>school-based sustainability efforts</em>,
                            promoting long-term ecological responsibility.
                        </MudText>
                    </MudStack>
                </MudStack>
            </MudStack>

            <MudStack Spacing="1">
                <MudText Typo="Typo.h6">Important Reminder ⚠️</MudText>
                <MudText Typo="Typo.caption">
                    Non-compliance with the plastic-free policy may result in denied entry to venues or participation restrictions.
                    We ask all delegations and attendees to cooperate fully and help maintain a clean and green Palaro experience for everyone.
                </MudText>
            </MudStack>

            <MudStack Spacing="1" Class="mt-10">
                <MudText Align="Align.Center" Typo="Typo.caption"><i>Let’s work together to make Palarong Pambansa 2026 not just a celebration of athletic excellence, but also a model for environmental stewardship.</i></MudText>
                <MudText Align="Align.Center"><strong>Thank you for your support.</strong></MudText>
            </MudStack>
        </MudStack>
    </DialogContent>
    <DialogActions>
        <MudStack Row Style="width: 100%" Justify="Justify.Center">
            <MudButton Style="text-transform: none" DropShadow="false" Size="Size.Large" OnClick="AgreeNotice" FullWidth>Agree</MudButton>
        </MudStack>
    </DialogActions>
</MudDialog>

@code {
    // Requirement for Dialog to work
    [CascadingParameter]
    private IMudDialogInstance? MudDialog { get; set; }

    private string? _passwordValue = "PALARO2026";
    private bool? isUnlocked;

    // DTOs
    public class EventsDTO
    {
        public class EventStreams
        {
            public int ID { get; set; }
            public int? EventStreamServiceID { get; set; }
            public string? StreamTitle { get; set; }
            public string? StreamURL { get; set; }
            public DateTime? StreamDate { get; set; }
        }
    }

    private void Cancel() => MudDialog?.Cancel();

    // Add event stream service
    private void AgreeNotice()
    {
        JSRuntime.InvokeVoidAsync("localStorage.setItem", "agreeNotice", true);
        Snackbar.Add("Thank you for your support.", Severity.Success);
        MudDialog?.Close(DialogResult.Ok(true));
    }
}
